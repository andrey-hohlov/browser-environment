!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e="undefined"!=typeof globalThis?globalThis:e||self).browserEnvironment=n()}(this,function(){"use strict";function n(n,e){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);e&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),o.push.apply(o,t)}return o}function e(i){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach(function(e){var n,o,t;n=i,t=r[o=e],o in n?Object.defineProperty(n,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[o]=t}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(r,e))})}return i}var o,t=!1,i=0,r=0,u={setClasses:!0},c=[],d={browser:!1,opera:!1,firefox:!1,safari:!1,ie:!1,ie10:!1,ie11:!1,edge:!1,chrome:!1,iPhone:!1,iPad:!1,iPod:!1,android:!1,mac:!1,win:!1,ios:!1,userTouching:!1,userHovering:!1,utilityFocus:!1,pointerFocus:!1,retina:!1,touchScreen:!1,viewport:{w:0,h:0}};function s(){d.viewport={w:Math.max(document.documentElement.clientWidth,window.innerWidth||0),h:Math.max(document.documentElement.clientHeight,window.innerHeight||0)}}function a(e){var n=c.indexOf(e);-1<n&&c.splice(n,1)}function f(e){if("function"!=typeof e)throw new TypeError("Handler must be function");return c.includes(e)||c.push(e),function(){return a(e)}}function w(){var n,o=e(e({},d),{},{viewport:e({},d.viewport)});c.forEach(function(e){return e(o)}),u.setClasses&&(n={"env-mac":d.mac,"env-win":d.win,"env-ios":d.ios,"env-android":d.android,"env-ipad":d.iPad,"env-iphone":d.iPhone,"env-opera":d.opera,"env-firefox":d.firefox,"env-safari":d.safari,"env-ie":d.ie,"env-ie10":d.ie10,"env-ie11":d.ie11,"env-edge":d.edge,"env-chrome":d.chrome,"env-retina":d.retina,"env-touchscreen":d.touchScreen,"env-user-touching":d.userTouching,"env-user-hovering":d.userHovering,"env-utility-focus":d.utilityFocus,"env-pointer-focus":d.pointerFocus},Object.keys(n).forEach(function(e){document.documentElement.classList[n[e]?"add":"remove"](e)})),u.onChange&&u.onChange(o)}function m(){i++,!d.userHovering&&10<i&&(d.userTouching=!1,d.userHovering=!0,w())}function g(){d.userTouching||(d.userHovering=!1,d.userTouching=!0,w()),i=0}function l(e){d.pointerFocus&&(d.ie10||d.ie11)&&(!e.originalEvent||e.originalEvent.fromElement||e.originalEvent.relatedTarget||(t=!0,setTimeout(function(){t=!1}))),d.pointerFocus=t,d.utilityFocus=!d.pointerFocus,w()}function h(){clearTimeout(r),t=!1}function v(){t=!0,clearTimeout(r),r=setTimeout(function(){t=!1},600)}function p(){window.addEventListener("focus",function e(){d.pointerFocus&&(t=!0,setTimeout(function(){t=!1})),window.removeEventListener("focus",e)})}var b=function(){s(),w()};function P(e){var n="".concat(!(0<arguments.length&&void 0!==e)||e?"add":"remove","EventListener");window[n]("touchstart",g),window[n]("mousemove",m),window[n]("blur",p),document.documentElement[n]("focusin",l),document.documentElement[n]("keydown",h),document.documentElement[n]("pointerdown",v),document.documentElement[n]("pointerup",v),document.documentElement[n]("mousedown",v),document.documentElement[n]("mouseup",v),document.documentElement[n]("click",v),window.addEventListener("orientationchange",b),window.addEventListener("resize",b)}return{init:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return o?console.warn("browser environment is already initialized"):(void 0!==e.setClasses&&(u.setClasses=!!e.setClasses),e.onChange&&(u.onChange=e.onChange),o={get browser(){return d.browser},get opera(){return d.opera},get firefox(){return d.firefox},get safari(){return d.safari},get ie(){return d.touchScreen},get ie10(){return d.ie10},get ie11(){return d.ie11},get edge(){return d.edge},get chrome(){return d.chrome},get iPhone(){return d.iPhone},get iPad(){return d.iPad},get iPod(){return d.iPod},get android(){return d.android},get mac(){return d.mac},get win(){return d.win},get ios(){return d.ios},get userTouching(){return d.userTouching},get userHovering(){return d.userHovering},get utilityFocus(){return d.utilityFocus},get pointerFocus(){return d.pointerFocus},get retina(){return d.retina},get touchScreen(){return d.touchScreen},get viewport(){return{w:d.viewport.w,h:d.viewport.h}},subscribe:f,unsubscribe:a},function(){if("undefined"!=typeof window){var e=window.navigator,n=e.userAgent,o=e.platform;d.browser=!0,d.utilityFocus=!0,d.iPhone=-1!==n.indexOf("iPhone"),d.iPad=-1!==n.indexOf("iPad"),d.iPod=-1!==n.indexOf("iPod"),d.android=/Android/.test(n),d.mac=!(d.iPhone||d.iPad||d.iPod||d.android||-1===o.indexOf("Mac")),d.win=-1!==o.indexOf("Win"),d.ios=d.iPhone||d.iPad||d.iPod,d.opera=!!window.opr&&!!window.opr.addons||!!window.opera||0<=navigator.userAgent.indexOf(" OPR/"),d.firefox="undefined"!=typeof InstallTrigger,d.safari=/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||window.safari.pushNotification).toString(),d.ie=!!document.documentMode,d.ie10=10===document.documentMode,d.ie11=11===document.documentMode,d.edge=!d.ie&&!!window.StyleMedia,d.chrome=!!window.chrome&&!!window.chrome.webstore,d.retina=1<window.devicePixelRatio,d.touchScreen=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),d.userTouching=d.touchScreen,d.userHovering=!d.userTouching,s()}}(),P(),w()),o},destroy:function(){o&&(u.setClasses=!0,u.onChange=null,P(!1),o=null)}}});
