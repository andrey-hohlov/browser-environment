!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e="undefined"!=typeof globalThis?globalThis:e||self).browserEnvironment=n()}(this,function(){"use strict";var n,o=!1,e=0,i=0,t={setClasses:!0},r=[],u={browser:!1,opera:!1,firefox:!1,safari:!1,ie:!1,ie10:!1,ie11:!1,edge:!1,chrome:!1,iPhone:!1,iPad:!1,iPod:!1,android:!1,mac:!1,win:!1,ios:!1,userTouching:!1,userHovering:!1,utilityFocus:!1,pointerFocus:!1,retina:!1,touchScreen:!1,viewport:{w:0,h:0}};function c(){u.viewport={w:Math.max(document.documentElement.clientWidth,window.innerWidth||0),h:Math.max(document.documentElement.clientHeight,window.innerHeight||0)}}function d(e){var n=r.indexOf(e);-1<n&&r.splice(n,1)}function s(e){if("function"!=typeof e)throw new TypeError("Handler must be function");return r.includes(e)||r.push(e),function(){return d(e)}}function a(){var n;r.forEach(function(e){return e(u)}),t.setClasses&&(n={"env-mac":u.mac,"env-win":u.win,"env-ios":u.ios,"env-android":u.android,"env-ipad":u.iPad,"env-iphone":u.iPhone,"env-opera":u.opera,"env-firefox":u.firefox,"env-safari":u.safari,"env-ie":u.ie,"env-ie10":u.ie10,"env-ie11":u.ie11,"env-edge":u.edge,"env-chrome":u.chrome,"env-retina":u.retina,"env-touchscreen":u.touchScreen,"env-user-touching":u.userTouching,"env-user-hovering":u.userHovering,"env-utility-focus":u.utilityFocus,"env-pointer-focus":u.pointerFocus},Object.keys(n).forEach(function(e){document.documentElement.classList[n[e]?"add":"remove"](e)}))}function f(){e++,!u.userHovering&&10<e&&(u.userTouching=!1,u.userHovering=!0,a())}function m(){u.userTouching||(u.userHovering=!1,u.userTouching=!0,a()),e=0}function w(e){u.pointerFocus&&(u.ie10||u.ie11)&&(!e.originalEvent||e.originalEvent.fromElement||e.originalEvent.relatedTarget||(o=!0,setTimeout(function(){o=!1}))),u.pointerFocus=o,u.utilityFocus=!u.pointerFocus,a()}function g(){clearTimeout(i),o=!1}function h(){o=!0,clearTimeout(i),i=setTimeout(function(){o=!1},600)}function v(){window.addEventListener("focus",function e(){u.pointerFocus&&(o=!0,setTimeout(function(){o=!1})),window.removeEventListener("focus",e)})}var l=function(){c(),a()};function p(e){var n="".concat(!(0<arguments.length&&void 0!==e)||e?"add":"remove","EventListener");window[n]("touchstart",m),window[n]("mousemove",f),window[n]("blur",v),document.documentElement[n]("focusin",w),document.documentElement[n]("keydown",g),document.documentElement[n]("pointerdown",h),document.documentElement[n]("pointerup",h),document.documentElement[n]("mousedown",h),document.documentElement[n]("mouseup",h),document.documentElement[n]("click",h),window.addEventListener("orientationchange",l),window.addEventListener("resize",l)}return{init:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return n||(void 0!==e.setClasses&&(t.setClasses=!!e.setClasses),n={get browser(){return u.browser},get opera(){return u.opera},get firefox(){return u.firefox},get safari(){return u.safari},get ie(){return u.touchScreen},get ie10(){return u.ie10},get ie11(){return u.ie11},get edge(){return u.edge},get chrome(){return u.chrome},get iPhone(){return u.iPhone},get iPad(){return u.iPad},get iPod(){return u.iPod},get android(){return u.android},get mac(){return u.mac},get win(){return u.win},get ios(){return u.ios},get userTouching(){return u.userTouching},get userHovering(){return u.userHovering},get utilityFocus(){return u.utilityFocus},get pointerFocus(){return u.pointerFocus},get retina(){return u.retina},get touchScreen(){return u.touchScreen},get viewport(){return{w:u.viewport.w,h:u.viewport.h}},subscribe:s,unsubscribe:d},function(){if("undefined"!=typeof window){var e=window.navigator,n=e.userAgent,o=e.platform;u.browser=!0,u.utilityFocus=!0,u.iPhone=-1!==n.indexOf("iPhone"),u.iPad=-1!==n.indexOf("iPad"),u.iPod=-1!==n.indexOf("iPod"),u.android=/Android/.test(n),u.mac=!(u.iPhone||u.iPad||u.iPod||u.android||-1===o.indexOf("Mac")),u.win=-1!==o.indexOf("Win"),u.ios=u.iPhone||u.iPad||u.iPod,u.opera=!!window.opr&&!!window.opr.addons||!!window.opera||0<=navigator.userAgent.indexOf(" OPR/"),u.firefox="undefined"!=typeof InstallTrigger,u.safari=/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||window.safari.pushNotification).toString(),u.ie=!!document.documentMode,u.ie10=10===document.documentMode,u.ie11=11===document.documentMode,u.edge=!u.ie&&!!window.StyleMedia,u.chrome=!!window.chrome&&!!window.chrome.webstore,u.retina=1<window.devicePixelRatio,u.touchScreen=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),u.userTouching=u.touchScreen,u.userHovering=!u.userTouching,c()}}(),p(),a()),n},destroy:function(){n&&(p(!1),n=null)}}});
