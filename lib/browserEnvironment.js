!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e="undefined"!=typeof globalThis?globalThis:e||self).browserEnvironment=n()}(this,function(){"use strict";function n(e){var n=h.indexOf(e);-1<n&&h.splice(n,1)}function o(){var n={_mac:l.mac,_win:l.win,_ios:l.ios,_android:l.android,_ipad:l.iPad,_iphone:l.iPhone,_opera:l.opera,_firefox:l.firefox,_safari:l.safari,_ie:l.ie,_ie10:l.ie10,_ie11:l.ie11,_edge:l.edge,_chrome:l.chrome,_retina:l.retina,_touchscreen:l.touchScreen,_usertouching:l.userTouching,_userhovering:l.userHovering,_utilityfocus:l.utilityFocus,_pointerfocus:l.pointerFocus};Object.keys(n).forEach(function(e){n[e]?document.documentElement.classList.add(e):document.documentElement.classList.remove(e)})}function t(){l.viewport.w=Math.max(document.documentElement.clientWidth,window.innerWidth||0),l.viewport.h=Math.max(document.documentElement.clientHeight,window.innerHeight||0)}function r(){h.forEach(function(e){return e(l)})}function d(){w++,!l.userHovering&&10<w&&(l.userTouching=!1,l.userHovering=!0,o(),r())}function u(){l.userTouching||(l.userHovering=!1,l.userTouching=!0,o(),r()),w=0}function c(e){l.pointerFocus&&(l.ie10||l.ie11)&&(!e.originalEvent||e.originalEvent.fromElement||e.originalEvent.relatedTarget||(i=!0,setTimeout(function(){i=!1}))),l.pointerFocus=i,l.utilityFocus=!l.pointerFocus,o()}function s(){clearTimeout(e),i=!1}function a(){i=!0,clearTimeout(e),e=setTimeout(function(){i=!1},600)}function f(){window.addEventListener("focus",function e(){l.pointerFocus&&(i=!0,setTimeout(function(){i=!1})),window.removeEventListener("focus",e)})}function m(){t(),r()}var e,i=!1,w=0,h=[],l={browser:!1,opera:!1,firefox:!1,safari:!1,ie:!1,ie10:!1,ie11:!1,edge:!1,chrome:!1,iPhone:!1,iPad:!1,iPod:!1,android:!1,mac:!1,win:!1,ios:!1,userTouching:!1,userHovering:!1,utilityFocus:!1,pointerFocus:!1,viewport:{h:0,w:0},retina:!1,touchScreen:!1,$subscribe:function(e){if("function"!=typeof e)throw new TypeError("Handler must be function");return h.includes(e)||h.push(e),function(){return n(e)}},$unsubscribe:n};return function(){if("undefined"!=typeof window){var e=window.navigator,n=e.userAgent,i=e.platform;l.browser=!0,l.utilityFocus=!0,l.iPhone=-1!==n.indexOf("iPhone"),l.iPad=-1!==n.indexOf("iPad"),l.iPod=-1!==n.indexOf("iPod"),l.android=/Android/.test(n),l.mac=!(l.iPhone||l.iPad||l.iPod||l.android||-1===i.indexOf("Mac")),l.win=-1!==i.indexOf("Win"),l.ios=l.iPhone||l.iPad||l.iPod,l.opera=!!window.opr&&!!window.opr.addons||!!window.opera||0<=navigator.userAgent.indexOf(" OPR/"),l.firefox="undefined"!=typeof InstallTrigger,l.safari=/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||window.safari.pushNotification).toString(),l.ie=!!document.documentMode,l.ie10=10===document.documentMode,l.ie11=11===document.documentMode,l.edge=!l.ie&&!!window.StyleMedia,l.chrome=!!window.chrome&&!!window.chrome.webstore,l.retina=1<window.devicePixelRatio,l.touchScreen=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),l.userTouching=l.touchScreen,l.userHovering=!l.userTouching,t(),o(),r(),window.addEventListener("touchstart",u),window.addEventListener("mousemove",d),window.addEventListener("resize",m),window.addEventListener("orientationchange",m),window.addEventListener("blur",f),document.documentElement.addEventListener("focusin",c),document.documentElement.addEventListener("keydown",s),document.documentElement.addEventListener("pointerdown",a),document.documentElement.addEventListener("pointerup",a),document.documentElement.addEventListener("mousedown",a),document.documentElement.addEventListener("mouseup",a),document.documentElement.addEventListener("click",a)}}(),l});
