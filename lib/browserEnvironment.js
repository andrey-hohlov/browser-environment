!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e=e||self).browserEnvironment=n()}(this,function(){"use strict";function n(e){var n=l.indexOf(e);-1<n&&l.splice(n,1)}function o(){var n={_mac:v.mac,_win:v.win,_ios:v.ios,_android:v.android,_ipad:v.iPad,_iphone:v.iPhone,_opera:v.opera,_firefox:v.firefox,_safari:v.safari,_ie:v.ie,_ie10:v.ie10,_ie11:v.ie11,_edge:v.edge,_chrome:v.chrome,_retina:v.retina,_touchscreen:v.touchScreen,_usertouching:v.userTouching,_userhovering:v.userHovering,_utilityfocus:v.utilityFocus,_pointerfocus:v.pointerFocus};Object.keys(n).forEach(function(e){n[e]?document.documentElement.classList.add(e):document.documentElement.classList.remove(e)})}function i(){v.viewport.w=Math.max(document.documentElement.clientWidth,window.innerWidth||0),v.viewport.h=Math.max(document.documentElement.clientHeight,window.innerHeight||0)}function e(){l.forEach(function(e){return e(v)})}function t(){v.userHovering||"touchend"===h||(v.userTouching=!1,v.userHovering=!0,o(),e()),h="mousemove"}function d(){v.userTouching||(v.userHovering=!1,v.userTouching=!0,o(),e()),h="touchstart"}function r(){h="touchend"}function u(e){v.pointerFocus&&(v.ie10||v.ie11)&&(!e.originalEvent||e.originalEvent.fromElement||e.originalEvent.relatedTarget||(w=!0,setTimeout(function(){w=!1}))),v.pointerFocus=w,v.utilityFocus=!v.pointerFocus,o()}function c(){clearTimeout(f),w=!1}function s(){w=!0,clearTimeout(f),f=setTimeout(function(){w=!1},600)}function a(){window.addEventListener("focus",function e(){v.pointerFocus&&(w=!0,setTimeout(function(){w=!1})),window.removeEventListener("focus",e)})}function m(){i(),e()}var f,w=!1,h="",l=[],v={browser:!1,opera:!1,firefox:!1,safari:!1,ie:!1,ie10:!1,ie11:!1,edge:!1,chrome:!1,iPhone:!1,iPad:!1,iPod:!1,android:!1,mac:!1,win:!1,ios:!1,userTouching:!1,userHovering:!1,utilityFocus:!1,pointerFocus:!1,viewport:{h:0,w:0},retina:!1,touchScreen:!1,$subscribe:function(e){if("function"!=typeof e)throw new TypeError("Handler must be function");return l.includes(e)||l.push(e),function(){return n(e)}},$unsubscribe:n};return function(){if("undefined"!=typeof window){var e=window.navigator,n=e.userAgent,o=e.platform;v.browser=!0,v.utilityFocus=!0,v.iPhone=-1!==n.indexOf("iPhone"),v.iPad=-1!==n.indexOf("iPad"),v.iPod=-1!==n.indexOf("iPod"),v.android=/Android/.test(n),v.mac=!(v.iPhone||v.iPad||v.iPod||v.android||-1===o.indexOf("Mac")),v.win=-1!==o.indexOf("Win"),v.ios=v.iPhone||v.iPad||v.iPod,v.opera=!!window.opr&&!!window.opr.addons||!!window.opera||0<=navigator.userAgent.indexOf(" OPR/"),v.firefox="undefined"!=typeof InstallTrigger,v.safari=/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||window.safari.pushNotification).toString(),v.ie=!!document.documentMode,v.ie10=10===document.documentMode,v.ie11=11===document.documentMode,v.edge=!v.ie&&!!window.StyleMedia,v.chrome=!!window.chrome&&!!window.chrome.webstore,v.retina=1<window.devicePixelRatio,v.touchScreen=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),i(),window.addEventListener("touchstart",d),window.addEventListener("touchend",r),window.addEventListener("mousemove",t),window.addEventListener("resize",m),window.addEventListener("orientationchange",m),window.addEventListener("blur",a),document.documentElement.addEventListener("focusin",u),document.documentElement.addEventListener("keydown",c),document.documentElement.addEventListener("pointerdown",s),document.documentElement.addEventListener("pointerup",s),document.documentElement.addEventListener("mousedown",s),document.documentElement.addEventListener("mouseup",s),document.documentElement.addEventListener("click",s)}}(),v});
